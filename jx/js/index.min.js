/*
	// SlidR - copyleft Molokoloco 2011 - Version alpha 1.1
	// Demo : http://www.b2bweb/bonus/jx/
	// The sources here : https://github.com/molokoloco/FRAMEWORK/tree/master/jx/
*/

var db=function(){},escapeURI=function(a){return encodeURIComponent(a)||encodeURI(a)||escape(a)||a},event2key={96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",48:"m0",49:"m1",50:"m2",51:"m3",52:"m4",53:"m5",54:"m6",55:"m7",56:"m8",57:"m9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",
37:"left",39:"right",38:"up",40:"down",13:"enter",27:"esc",32:"space",107:"+",109:"-",33:"pageUp",34:"pageDown",223:"!",178:"stop",176:"suivant",177:"precedant"},e2key=function(a){return event2key[a.which||a.keyCode]||""},getHash=function(){return document.location.hash.replace(/^#/,"")||""};
$(document).ready(function(){var a=$("div.roundabout ul:first"),d=a.find("li.slide");$sommaire=$("div#footer span#sommaire");startH=getHash();currentZoom=1;title=d.eq(0).find("h1:first").text();url="http://www.b2bweb.fr/bonus/jx/";startH>0&&setTimeout(function(){a.roundabout_animateToChild(startH-1)},2E3);$("div.roundabout").css({transform:"scale(5)","transform-origin":"50% 0","-ms-transform-origin":"50% 0","-webkit-transform-origin":"50% 0","-moz-transform-origin":"50% 0","-o-transform-origin":"50% 0"});
var c=function(b){currentZoom=b?b:$(window).width()/1680;currentZoom=currentZoom<0.5?0.5:currentZoom;$("div.roundabout").stop(!0).animate({transform:"translate(0, 0) scale("+currentZoom+")"},1200);a.roundabout_updateChildPositions();a.roundabout_animateToBearing($.roundabout_getBearing(a));$("html,body").css("zoom","101%")};a.roundabout({duration:1200,minScale:0.15,maxScale:1,minOpacity:0.1,tilt:0.555,btnNext:".next",btnPrev:".previous",clickToFocus:!0,reflect:!0,childSelector:"li.slide"}).bind("roundaboutFocus",
function(b,a){window.location.hash="#"+(a.childPos+1)});d.each(function(b){$sommaire.append('<a href="#'+(b+1)+'" title="'+$(this).find("h5:first").text()+'">'+(b+1)+"</a>")});$sommaire.delegate("a","click",function(b){b.preventDefault();b=$(this).attr("href").replace(/^#/,"");b>0&&a.roundabout_animateToChild(b-1)});$(window).bind("smartresize",function(){c()}).trigger("smartresize").bind("hashchange",function(){var b=getHash();b<1&&(b=1);$sommaire.find("a").removeClass("current").eq(b-1).addClass("current")}).trigger("hashchange");
$("body").bind("mousewheel",function(b,a){b.preventDefault();b.ctrlKey?a>0?c(currentZoom+0.05):c(currentZoom-0.05):a>0?$.roundabout_goPrev():$.roundabout_goNext();return!1});$(document).focus().bind("keyup",function(b){b.preventDefault();switch(e2key(b)){case "up":c(currentZoom+0.05);break;case "down":c(currentZoom-0.05);break;case "left":$.roundabout_goPrev();break;case "right":$.roundabout_goNext();break;case "enter":a.roundabout_setBearing(0)}return!1})});
$(window).bind("load",function(){setTimeout(function(){$("<img/>").load(function(){$(this).attr({width:$(this).width(),height:$(this).height()}).css({opacity:0,top:($(window).scrollTop()||0)-$(this).height()+"px",position:"absolute",left:"50%",margin:"0 0 0 -"+$(this).width()/2+"px"}).animate({opacity:1,top:100+($(window).scrollTop()||0)+"px"},800).delay(2200).fadeOut(600,function(){$(this).remove()})}).error(function(){}).attr("src","./images/key-pad-arrows.png").appendTo("body")},2E3)});